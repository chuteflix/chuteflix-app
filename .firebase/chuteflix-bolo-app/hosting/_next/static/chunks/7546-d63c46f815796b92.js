"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7546],{6516:(r,e,o)=>{o.d(e,{D0:()=>u,e:()=>d,eF:()=>l,nb:()=>c});var a=o(56104),t=o(35317),s=o(81427);o(94948),o(34948),o(53424);var i=o(50926);let n=r=>{let e=r.data();return{id:r.id,userId:e.userId,bolaoId:e.bolaoId,scoreTeam1:e.scoreTeam1,scoreTeam2:e.scoreTeam2,amount:e.amount||0,createdAt:e.createdAt,status:e.status,comment:e.comment}},c=async(r,e,o,t)=>{try{let i=(0,s.Qg)(a.Cn,"placeChute");await i({bolaoId:r,scoreTeam1:e,scoreTeam2:o,amount:t})}catch(r){throw console.error("Erro ao registrar o chute:",r),r}},l=async(r,e,o)=>{let i=(0,t.wP)(a.db),c="chutes",l=(0,t.H9)(a.db,"boloes",r);i.update(l,{finalScoreTeam1:e,finalScoreTeam2:o,status:"Finalizado"});let d=(0,t.P)((0,t.rJ)(a.db,c),(0,t._M)("bolaoId","==",r),(0,t._M)("status","in",["Em Aberto","Aprovado"])),u=await (0,t.GG)(d),p=[],m=0;if(u.forEach(r=>{let a=n(r);m+=a.amount,a.scoreTeam1===e&&a.scoreTeam2===o?p.push(a):i.update(r.ref,{status:"Perdido"})}),p.length>0){let e=(((await (0,t.x7)(l)).data().initialPrize||0)+.9*m)/p.length,o=(0,s.Qg)(a.Cn,"payWinner"),n=p.map(s=>(i.update((0,t.H9)(a.db,c,s.id),{status:"Ganho"}),o({userId:s.userId,bolaoId:r,prizeAmount:e})));await Promise.all(n)}await i.commit()},d=async r=>{if(!r)return[];try{let e=(0,t.P)((0,t.rJ)(a.db,"chutes"),(0,t._M)("bolaoId","==",r),(0,t.My)("createdAt","desc")),o=await (0,t.GG)(e);if(o.empty)return[];let s=o.docs.map(n);return await Promise.all(s.map(async r=>{let e=await (0,i.VM)(r.userId);return{...r,user:e}}))}catch(r){return console.error("Erro ao buscar \xfaltimos palpites com dados de usu\xe1rio:",r),[]}},u=async r=>{if(!r)return 0;try{let e=(0,t.P)((0,t.rJ)(a.db,"chutes"),(0,t._M)("bolaoId","==",r),(0,t._M)("status","in",["Em Aberto","Ganho","Perdido","Aprovado"]));return(await (0,t.d_)(e)).data().count}catch(r){return console.error("Erro ao contar participantes:",r),0}}},30285:(r,e,o)=>{o.d(e,{$:()=>l,r:()=>c});var a=o(95155),t=o(12115),s=o(66634),i=o(74466),n=o(59434);let c=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=t.forwardRef((r,e)=>{let{className:o,variant:t,size:i,asChild:l=!1,...d}=r,u=l?s.DX:"button";return(0,a.jsx)(u,{className:(0,n.cn)(c({variant:t,size:i,className:o})),ref:e,...d})});l.displayName="Button"},34948:(r,e,o)=>{o.d(e,{To:()=>u,ZN:()=>c,Zs:()=>n,_J:()=>l,n7:()=>d});var a=o(56104),t=o(35317),s=o(38275);let i=r=>{let e=r.data();return{id:r.id,name:e.name,logoUrl:e.shieldUrl||"",state:e.state,city:e.city,level:e.level,scope:e.scope,location:e.location}},n=async r=>{try{let{shieldFile:e,...o}=r,i="",n=(0,t.H9)((0,t.rJ)(a.db,"teams")),c=n.id;e&&(i=await (0,s.Q)(e,"teams/".concat(c,"/shield.png")));let l={...o,shieldUrl:i,createdAt:(0,t.O5)()};return await (0,t.BN)(n,l),{id:c,...o,logoUrl:i}}catch(r){throw console.error("Erro ao adicionar time:",r),Error("N\xe3o foi poss\xedvel adicionar o time.")}},c=async()=>{try{return(await (0,t.GG)((0,t.rJ)(a.db,"teams"))).docs.map(i)}catch(r){throw console.error("Erro ao buscar times:",r),Error("N\xe3o foi poss\xedvel buscar os times.")}},l=async r=>{if(!r)return null;try{let e=(0,t.H9)(a.db,"teams",r),o=await (0,t.x7)(e);if(o.exists())return i(o);return null}catch(r){throw console.error("Erro ao buscar dados do time:",r),Error("N\xe3o foi poss\xedvel buscar os dados do time.")}},d=async(r,e)=>{try{let{shieldFile:o,...i}=e,n={...i};if(o){let e="teams/".concat(r,"/shield.png");n.shieldUrl=await (0,s.Q)(o,e)}let c=(0,t.H9)(a.db,"teams",r);await (0,t.mZ)(c,n)}catch(r){throw console.error("Erro ao atualizar time:",r),Error("N\xe3o foi poss\xedvel atualizar o time.")}},u=async r=>{if(!r)throw Error("O ID do time \xe9 obrigat\xf3rio para deletar.");try{let e=(0,t.H9)(a.db,"teams",r);await (0,t.kd)(e)}catch(r){throw console.error("Erro ao deletar time:",r),Error("N\xe3o foi poss\xedvel deletar o time.")}}},38275:(r,e,o)=>{o.d(e,{Q:()=>s});var a=o(90858);let t=(0,a.c7)();async function s(r,e){if(!r)throw Error("Nenhum arquivo fornecido para o upload.");let o=(0,a.KR)(t,e);return await (0,a.D)(o,r),await (0,a.qk)(o)}},50926:(r,e,o)=>{o.d(e,{CF:()=>n,VM:()=>c,eg:()=>l,x:()=>i});var a=o(35317),t=o(56104),s=o(38275);let i=async(r,e)=>{try{if(!r)throw Error("UID do usu\xe1rio \xe9 necess\xe1rio para o upload.");if(!e)throw Error("Nenhum arquivo selecionado.");let o=await (0,s.Q)(e,"profile-pictures/".concat(r,"/profile.jpg"));return await l(r,{photoURL:o}),o}catch(r){throw console.error("Erro ao fazer upload da foto de perfil:",r),Error("N\xe3o foi poss\xedvel fazer o upload da imagem.")}},n=async()=>{try{let r=(0,a.rJ)(t.db,"users"),e=await (0,a.GG)(r),o=[];return e.forEach(r=>{o.push({uid:r.id,...r.data()})}),o}catch(r){return console.error("Error getting all users:",r),[]}},c=async r=>{try{let e=(0,a.H9)(t.db,"users",r),o=await (0,a.x7)(e);if(o.exists())return{uid:r,...o.data()};return console.log("No such document!"),null}catch(r){return console.error("Error getting user profile:",r),null}},l=async(r,e)=>{try{let o=(0,a.H9)(t.db,"users",r);await (0,a.mZ)(o,e)}catch(r){throw console.error("Error updating user profile:",r),r}}},53424:(r,e,o)=>{o.d(e,{cc:()=>c,nO:()=>d,nn:()=>i,pj:()=>n,tu:()=>l});var a=o(56104),t=o(35317);let s=r=>{let e=r.data();return{id:r.id,name:e.name,type:e.type,competitionType:e.competitionType,scope:e.scope,series:e.series,state:e.state,city:e.city,continent:e.continent,country:e.country}},i=async r=>{try{return{id:(await (0,t.gS)((0,t.rJ)(a.db,"championships"),{...r,createdAt:(0,t.O5)()})).id,...r}}catch(r){throw console.error("Erro ao adicionar campeonato: ",r),Error("N\xe3o foi poss\xedvel adicionar o campeonato.")}},n=async()=>{try{return(await (0,t.GG)((0,t.rJ)(a.db,"championships"))).docs.map(s)}catch(r){throw console.error("Erro ao buscar campeonatos: ",r),Error("N\xe3o foi poss\xedvel buscar os campeonatos.")}},c=async r=>{if(r)try{let e=(0,t.H9)(a.db,"championships",r),o=await (0,t.x7)(e);if(o.exists())return s(o);return}catch(r){throw console.error("Erro ao buscar campeonato pelo ID: ",r),Error("N\xe3o foi poss\xedvel buscar os dados do campeonato.")}},l=async(r,e)=>{try{let o=(0,t.H9)(a.db,"championships",r);await (0,t.mZ)(o,e)}catch(r){throw console.error("Erro ao atualizar campeonato: ",r),Error("N\xe3o foi poss\xedvel atualizar o campeonato.")}},d=async r=>{if(!r)throw Error("O ID do campeonato \xe9 obrigat\xf3rio para deletar.");try{let e=(0,t.H9)(a.db,"championships",r);await (0,t.kd)(e)}catch(r){throw console.error("Erro ao deletar o campeonato."),Error("N\xe3o foi poss\xedvel deletar o campeonato.")}}},56104:(r,e,o)=>{o.d(e,{Cn:()=>p,IG:()=>u,db:()=>d,j2:()=>l});var a=o(23915),t=o(93004),s=o(35317),i=o(90858),n=o(81427);let c=(0,a.Wp)({apiKey:"AIzaSyBEx-hnuee9Wczxrwx7kyh8q3LyjOgNPLY",authDomain:"chuteflix-bolo-app.firebaseapp.com",projectId:"chuteflix-bolo-app",storageBucket:"chuteflix-bolo-app.firebasestorage.app",messagingSenderId:"1007906207909",appId:"1:1007906207909:web:cbdacde4b8c07a8874f54c"}),l=(0,t.xI)(c),d=(0,s.aU)(c),u=(0,i.c7)(c),p=(0,n.Uz)(c)},59434:(r,e,o)=>{o.d(e,{cn:()=>s});var a=o(52596),t=o(39688);function s(){for(var r=arguments.length,e=Array(r),o=0;o<r;o++)e[o]=arguments[o];return(0,t.QP)((0,a.$)(e))}},66695:(r,e,o)=>{o.d(e,{BT:()=>l,Wu:()=>d,ZB:()=>c,Zp:()=>i,aR:()=>n,wL:()=>u});var a=o(95155),t=o(12115),s=o(59434);let i=t.forwardRef((r,e)=>{let{className:o,...t}=r;return(0,a.jsx)("div",{ref:e,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",o),...t})});i.displayName="Card";let n=t.forwardRef((r,e)=>{let{className:o,...t}=r;return(0,a.jsx)("div",{ref:e,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",o),...t})});n.displayName="CardHeader";let c=t.forwardRef((r,e)=>{let{className:o,...t}=r;return(0,a.jsx)("div",{ref:e,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",o),...t})});c.displayName="CardTitle";let l=t.forwardRef((r,e)=>{let{className:o,...t}=r;return(0,a.jsx)("div",{ref:e,className:(0,s.cn)("text-sm text-muted-foreground",o),...t})});l.displayName="CardDescription";let d=t.forwardRef((r,e)=>{let{className:o,...t}=r;return(0,a.jsx)("div",{ref:e,className:(0,s.cn)("p-6 pt-0",o),...t})});d.displayName="CardContent";let u=t.forwardRef((r,e)=>{let{className:o,...t}=r;return(0,a.jsx)("div",{ref:e,className:(0,s.cn)("flex items-center p-6 pt-0",o),...t})});u.displayName="CardFooter"},94948:(r,e,o)=>{o.d(e,{Ny:()=>p,R1:()=>m,jv:()=>c,m6:()=>d,rP:()=>u,xo:()=>l});var a=o(35317),t=o(56104),s=o(44861);let i=r=>{if(!r)return null;if("function"==typeof r.toDate)return r.toDate();let e=new Date(r);return(0,s.f)(e)?e:null},n=r=>{let e=r.data();return{id:r.id,championshipId:e.championshipId,championship:e.championship,homeTeamId:e.homeTeamId||e.teamAId,awayTeamId:e.awayTeamId||e.teamBId,matchStartDate:i(e.matchStartDate),matchEndDate:i(e.matchEndDate),closingTime:e.closingTime,betAmount:e.betAmount,initialPrize:e.initialPrize||0,status:e.status||"Aberto",categoryIds:e.categoryIds||[],userGuess:e.userGuess}},c=async()=>{try{return(await (0,a.GG)((0,a.rJ)(t.db,"boloes"))).docs.map(n)}catch(r){throw console.error("Erro ao buscar bol\xf5es: ",r),Error("N\xe3o foi poss\xedvel buscar os bol\xf5es.")}},l=async r=>{try{let e=(0,a.P)((0,a.rJ)(t.db,"boloes"),(0,a._M)("categoryIds","array-contains",r));return(await (0,a.GG)(e)).docs.map(n)}catch(r){throw console.error("Erro ao buscar bol\xf5es por categoria: ",r),Error("N\xe3o foi poss\xedvel buscar os bol\xf5es para esta categoria.")}},d=async r=>{if(!r)return null;try{let e=await (0,a.x7)((0,a.H9)(t.db,"boloes",r));if(e.exists())return n(e);return null}catch(r){throw console.error("Erro ao buscar bol\xe3o pelo ID: ",r),Error("N\xe3o foi poss\xedvel buscar os dados do bol\xe3o.")}},u=async r=>{try{let{homeTeam:e,awayTeam:o,...s}=r;return(await (0,a.gS)((0,a.rJ)(t.db,"boloes"),{...s,homeTeamId:e.id,awayTeamId:o.id,status:"Aberto",createdAt:(0,a.O5)()})).id}catch(r){throw console.error("Erro ao adicionar bol\xe3o: ",r),Error("N\xe3o foi poss\xedvel adicionar o bol\xe3o.")}},p=async(r,e)=>{try{let{homeTeam:o,awayTeam:s,...i}=e,n=(0,a.H9)(t.db,"boloes",r),c={...i};o&&(c.homeTeamId=o.id),s&&(c.awayTeamId=s.id),await (0,a.mZ)(n,c)}catch(r){throw console.error("Erro ao atualizar bol\xe3o: ",r),Error("N\xe3o foi poss\xedvel atualizar o bol\xe3o.")}},m=async r=>{try{await (0,a.kd)((0,a.H9)(t.db,"boloes",r))}catch(r){throw console.error("Erro ao deletar bol\xe3o: ",r),Error("N\xe3o foi poss\xedvel deletar o bol\xe3o.")}}}}]);