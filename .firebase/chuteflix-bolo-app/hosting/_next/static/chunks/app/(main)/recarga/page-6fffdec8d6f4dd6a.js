(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6437],{2696:(e,a,t)=>{Promise.resolve().then(t.bind(t,36420))},36420:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>L});var s=t(95155),r=t(12115),n=t(68437),i=t(86659),o=t(55379),l=t(38275),c=t(30285),d=t(66695),u=t(62523),m=t(85057),p=t(87481),x=t(50172),h=t(19968),g=t(3638),f=t(17607),j=t(91555),v=t(66766),N=t(15599),y=t(50594),b=t(31949),w=t(54165);function C(e){let{isOpen:a,onClose:t,onPaymentConfirmed:n,amount:o}=e,[l,d]=(0,r.useState)(null),[u,m]=(0,r.useState)(!0),{toast:h}=(0,p.dj)();return(0,r.useEffect)(()=>{a&&(async()=>{m(!0);try{let e=await (0,i.mt)();d(e)}catch(e){h({title:"Erro ao carregar dados de pagamento.",variant:"destructive"})}finally{m(!1)}})()},[a,h]),(0,s.jsx)(w.lG,{open:a,onOpenChange:t,children:(0,s.jsxs)(w.Cf,{children:[(0,s.jsxs)(w.c7,{children:[(0,s.jsx)(w.L3,{className:"text-center text-2xl",children:"Realize o Pagamento"}),(0,s.jsxs)(w.rr,{className:"text-center",children:["Para confirmar sua recarga, transfira exatamente o valor de ",(0,s.jsx)("strong",{children:o.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),"."]})]}),u?(0,s.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,s.jsx)(x.A,{className:"h-8 w-8 animate-spin"})}):l?(0,s.jsxs)("div",{className:"my-4 flex flex-col items-center gap-4",children:[l.qrCodeUrl&&(0,s.jsx)(v.default,{src:l.qrCodeUrl,alt:"QR Code para pagamento",width:180,height:180}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"font-semibold",children:"Chave Pix (CNPJ):"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-muted rounded-md",children:[(0,s.jsx)("code",{className:"text-muted-foreground",children:l.pixKey}),(0,s.jsx)(c.$,{variant:"ghost",size:"icon",onClick:()=>{(null==l?void 0:l.pixKey)&&(navigator.clipboard.writeText(l.pixKey),h({title:"Chave Pix copiada!"}))},children:(0,s.jsx)(N.A,{className:"h-4 w-4"})})]})]}),(0,s.jsxs)("div",{className:"w-full p-3 bg-blue-950/80 border border-blue-700 rounded-lg text-sm mt-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(y.A,{className:"h-5 w-5 text-blue-400"}),(0,s.jsx)("h4",{className:"font-semibold text-white",children:"Como proceder"})]}),(0,s.jsxs)("ol",{className:"list-decimal list-inside space-y-1 text-blue-200",children:[(0,s.jsx)("li",{children:"Copie a chave PIX ou escaneie o QR Code."}),(0,s.jsx)("li",{children:"Fa\xe7a a transfer\xeancia no app do seu banco."}),(0,s.jsx)("li",{children:"Clique no bot\xe3o abaixo para enviar o comprovante."})]})]}),(0,s.jsxs)("div",{className:"w-full p-3 bg-amber-950/80 border border-amber-700 rounded-lg text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(b.A,{className:"h-5 w-5 text-amber-400"}),(0,s.jsx)("h4",{className:"font-semibold text-white",children:"Aviso Importante"})]}),(0,s.jsxs)("p",{className:"text-amber-200",children:["O saldo pode levar ",(0,s.jsx)("strong",{children:"at\xe9 2 horas"})," para ser creditado (das 06:00 \xe0s 23:00)."]})]})]}):(0,s.jsx)("div",{className:"text-center h-40",children:(0,s.jsx)("p",{children:"N\xe3o foi poss\xedvel carregar as informa\xe7\xf5es de pagamento."})}),(0,s.jsx)(w.Es,{children:(0,s.jsx)(c.$,{onClick:n,className:"w-full h-12 text-lg",children:"J\xe1 Paguei, Enviar Comprovante"})})]})})}var A=t(38224),E=t(75066);function R(e){let{isOpen:a,onClose:t,onWhatsappRedirect:n,onFileSelect:i,isUploading:o}=e,l=(0,r.useRef)(null),{toast:d}=(0,p.dj)(),u=async e=>{var a;let s=null==(a=e.target.files)?void 0:a[0];if(s)try{await i(s),d({title:"Comprovante Enviado!",description:"Seu comprovante foi anexado e ser\xe1 analisado em breve.",variant:"success"}),t()}catch(e){}};return(0,s.jsx)(w.lG,{open:a,onOpenChange:t,children:(0,s.jsxs)(w.Cf,{children:[(0,s.jsxs)(w.c7,{children:[(0,s.jsx)(w.L3,{className:"text-center text-2xl",children:"Enviar Comprovante"}),(0,s.jsx)(w.rr,{className:"text-center",children:"Para acelerar a aprova\xe7\xe3o da sua recarga, por favor, envie o comprovante de pagamento."})]}),(0,s.jsxs)("div",{className:"my-6 flex flex-col gap-4",children:[(0,s.jsxs)(c.$,{onClick:n,variant:"success",size:"lg",className:"h-14 text-lg",children:[(0,s.jsx)(A.A,{className:"mr-2 h-6 w-6"}),"Enviar pelo WhatsApp"]}),(0,s.jsx)("input",{type:"file",ref:l,onChange:u,className:"hidden",accept:"image/png, image/jpeg, image/gif, application/pdf"}),(0,s.jsxs)(c.$,{onClick:()=>{var e;null==(e=l.current)||e.click()},variant:"outline",size:"lg",className:"h-14 text-lg",disabled:o,children:[o?(0,s.jsx)(x.A,{className:"mr-2 h-6 w-6 animate-spin"}):(0,s.jsx)(E.A,{className:"mr-2 h-6 w-6"}),o?"Enviando...":"Anexar Comprovante"]})]}),(0,s.jsx)(w.Es,{children:(0,s.jsx)(c.$,{onClick:t,variant:"ghost",className:"w-full",children:"Fechar"})})]})})}var S=t(85127),k=t(41784),P=t(6874),z=t.n(P),B=t(35317),D=t(56104);function L(){let{user:e}=(0,n.A)(),{toast:a}=(0,p.dj)(),[t,v]=(0,r.useState)(null),[N,y]=(0,r.useState)(void 0),[b,w]=(0,r.useState)(!0),[A,E]=(0,r.useState)(!1),[P,L]=(0,r.useState)(!1),[_,O]=(0,r.useState)(!1),[U,H]=(0,r.useState)(!1),[$,I]=(0,r.useState)(null),[F,V]=(0,r.useState)([]),[q,M]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if(!e)return void M(!1);M(!0);let t=(0,B.P)((0,B.rJ)(D.db,"transactions"),(0,B._M)("uid","==",e.uid),(0,B._M)("type","==","deposit"),(0,B.My)("createdAt","desc"),(0,B.AB)(10)),s=(0,B.aQ)(t,e=>{V(e.docs.map(e=>({id:e.id,...e.data()}))),M(!1)},e=>{console.error("Erro no listener de dep\xf3sitos:",e),a({title:"Erro ao carregar hist\xf3rico",description:"N\xe3o foi poss\xedvel buscar suas recargas. Tente recarregar a p\xe1gina.",variant:"destructive"}),M(!1)});return()=>s()},[e,a]),(0,r.useEffect)(()=>{(async()=>{w(!0);try{let e=await (0,i.mt)();v(e)}catch(e){a({title:"Erro ao carregar dados de pagamento.",variant:"destructive"})}finally{w(!1)}})()},[a]);let Q=async()=>{if(!e)return void a({title:"Voc\xea precisa estar logado.",variant:"destructive"});if(!N)return void a({title:"Preencha o valor da recarga.",variant:"destructive"});if((null==t?void 0:t.minDeposit)&&N<t.minDeposit)return void a({title:"O valor m\xednimo para dep\xf3sito \xe9 de ".concat(t.minDeposit.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})),variant:"destructive"});E(!0);try{let a=await (0,o.zS)({uid:e.uid,type:"deposit",amount:N,description:"Dep\xf3sito via PIX",status:"pending",metadata:{receiptUrl:""}});I(a),O(!0)}catch(e){console.error("Erro ao criar solicita\xe7\xe3o:",e),a({title:"Erro ao criar solicita\xe7\xe3o de recarga.",variant:"destructive"})}finally{E(!1)}},G=()=>{H(!1),a({title:"Solicita\xe7\xe3o em an\xe1lise",description:"Sua recarga est\xe1 sendo processada. O saldo ser\xe1 atualizado em breve.",variant:"success"}),y(void 0),I(null)},J=async t=>{if(!e||!$)return void a({title:"Erro",description:"Usu\xe1rio n\xe3o autenticado ou transa\xe7\xe3o n\xe3o encontrada.",variant:"destructive"});L(!0);try{let a="receipts/deposits/".concat(e.uid,"/").concat($,"-").concat(t.name),s=await (0,l.Q)(t,a);await (0,o.AF)($,{metadata:{receiptUrl:s}}),G()}catch(e){throw console.error("Erro ao enviar comprovante:",e),a({title:"Erro ao Enviar",description:"N\xe3o foi poss\xedvel enviar o comprovante. Tente novamente ou use o WhatsApp.",variant:"destructive"}),e}finally{L(!1)}},T=e=>{switch(e){case"completed":return"bg-green-100 text-green-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-yellow-100 text-yellow-800"}},W=e=>{switch(e){case"completed":return"Conclu\xeddo";case"failed":return"Recusado";default:return"Pendente"}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"container mx-auto space-y-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Recarregar Saldo"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,s.jsxs)(d.Zp,{children:[(0,s.jsxs)(d.aR,{children:[(0,s.jsx)(d.ZB,{children:"Passo 1: Informe o Valor"}),(0,s.jsx)(d.BT,{children:"Digite o valor que voc\xea deseja adicionar ao seu saldo."})]}),(0,s.jsxs)(d.Wu,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(m.J,{htmlFor:"amount",children:"Valor da Recarga (R$)"}),(0,s.jsx)(j.HG,{id:"amount",customInput:u.p,thousandSeparator:".",decimalSeparator:",",prefix:"R$ ",value:N,onValueChange:e=>y(e.floatValue),placeholder:"R$ 0,00",className:"h-12 text-lg"})]}),(0,s.jsxs)(c.$,{onClick:Q,disabled:A||b,className:"w-full h-12 text-lg",children:[A?(0,s.jsx)(x.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,s.jsx)(h.A,{className:"mr-2 h-4 w-4"}),A?"Processando...":"Continuar para Pagamento"]})]})]}),(0,s.jsxs)(d.Zp,{children:[(0,s.jsxs)(d.aR,{children:[(0,s.jsxs)(d.ZB,{className:"flex items-center gap-2",children:[(0,s.jsx)(g.A,{})," Hist\xf3rico de Recargas"]}),(0,s.jsx)(d.BT,{children:"Acompanhe o status das suas 10 recargas mais recentes."})]}),(0,s.jsx)(d.Wu,{children:(0,s.jsxs)(S.XI,{children:[(0,s.jsx)(S.A0,{children:(0,s.jsxs)(S.Hj,{children:[(0,s.jsx)(S.nd,{children:"Data"}),(0,s.jsx)(S.nd,{children:"Valor"}),(0,s.jsx)(S.nd,{children:"Status"}),(0,s.jsx)(S.nd,{children:"Comprovante"})]})}),(0,s.jsx)(S.BF,{children:q?(0,s.jsx)(S.Hj,{children:(0,s.jsx)(S.nA,{colSpan:4,className:"h-24 text-center",children:(0,s.jsx)(x.A,{className:"h-6 w-6 animate-spin mx-auto"})})}):F.length>0?F.map(e=>{var a;return(0,s.jsxs)(S.Hj,{children:[(0,s.jsx)(S.nA,{children:e.createdAt?(0,k.GP)(new Date(1e3*e.createdAt.seconds),"dd/MM/yyyy"):"N/A"}),(0,s.jsx)(S.nA,{children:e.amount.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),(0,s.jsx)(S.nA,{children:(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(T(e.status)),children:W(e.status)})}),(0,s.jsx)(S.nA,{children:(null==(a=e.metadata)?void 0:a.receiptUrl)?(0,s.jsx)(c.$,{asChild:!0,variant:"outline",size:"icon",children:(0,s.jsx)(z(),{href:e.metadata.receiptUrl,target:"_blank",children:(0,s.jsx)(f.A,{className:"h-4 w-4"})})}):(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"-"})})]},e.id)}):(0,s.jsx)(S.Hj,{children:(0,s.jsx)(S.nA,{colSpan:4,className:"h-24 text-center",children:"Nenhuma recarga realizada."})})})]})})]})]})]}),_&&N&&(0,s.jsx)(C,{isOpen:_,onClose:()=>O(!1),onPaymentConfirmed:()=>{O(!1),H(!0)},amount:N}),U&&$&&(0,s.jsx)(R,{isOpen:U,onClose:G,onFileSelect:J,onWhatsappRedirect:()=>{if(!(null==t?void 0:t.whatsappNumber)||!N||!$)return void a({title:"N\xe3o foi poss\xedvel gerar o link do WhatsApp.",variant:"destructive"});let e="Ol\xe1! Acabei de fazer uma recarga de ".concat(N.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),".\n\nEstou enviando o comprovante para agilizar a aprova\xe7\xe3o.\n\nMeu ID de Transa\xe7\xe3o \xe9: ").concat($),s="https://api.whatsapp.com/send?phone=".concat(t.whatsappNumber.replace(/\D/g,""),"&text=").concat(encodeURIComponent(e));window.open(s,"_blank"),G()},isUploading:P})]})}},54165:(e,a,t)=>{"use strict";t.d(a,{Cf:()=>m,Es:()=>x,L3:()=>h,c7:()=>p,lG:()=>l,rr:()=>g,zM:()=>c});var s=t(95155),r=t(12115),n=t(45821),i=t(25318),o=t(59434);let l=n.bL,c=n.l9,d=n.ZL;n.bm;let u=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.hJ,{ref:a,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r})});u.displayName=n.hJ.displayName;let m=r.forwardRef((e,a)=>{let{className:t,children:r,...l}=e;return(0,s.jsxs)(d,{children:[(0,s.jsx)(u,{}),(0,s.jsxs)(n.UC,{ref:a,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...l,children:[r,(0,s.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(i.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=n.UC.displayName;let p=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...t})};p.displayName="DialogHeader";let x=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};x.displayName="DialogFooter";let h=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.hE,{ref:a,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",t),...r})});h.displayName=n.hE.displayName;let g=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.VY,{ref:a,className:(0,o.cn)("text-sm text-muted-foreground",t),...r})});g.displayName=n.VY.displayName},86659:(e,a,t)=>{"use strict";t.d(a,{DZ:()=>l,KH:()=>c,mt:()=>o});var s=t(56104),r=t(35317),n=t(90858);let i="main_settings",o=async()=>{try{let e=(0,r.H9)(s.db,"settings",i),a=await (0,r.x7)(e);if(a.exists())return a.data();return console.log("No settings document found!"),null}catch(e){throw console.error("Error getting settings:",e),Error("Could not fetch settings.")}},l=async e=>{try{let a=(0,r.H9)(s.db,"settings",i);await (0,r.BN)(a,{...e,updatedAt:(0,r.O5)()},{merge:!0})}catch(e){throw console.error("Error saving settings:",e),Error("Could not save settings.")}},c=async e=>{if(!e)throw Error("No file provided for QR code upload.");try{let a=(0,n.KR)(s.IG,"settings/".concat(i,"/qr_code.png")),t=await (0,n.D)(a,e),r=await (0,n.qk)(t.ref);return await l({qrCodeUrl:r}),r}catch(e){throw console.error("Error uploading QR code:",e),Error("Could not upload QR code.")}}}},e=>{var a=a=>e(e.s=a);e.O(0,[2992,7138,4277,7106,6838,7239,1784,9397,1555,9013,2e3,2441,8441,1684,7358],()=>a(2696)),_N_E=e.O()}]);