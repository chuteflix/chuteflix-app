(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[272],{3561:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(40157).A)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},17759:(e,r,t)=>{"use strict";t.d(r,{C5:()=>j,MJ:()=>h,eI:()=>f,lR:()=>x,lV:()=>c,zB:()=>u});var a=t(95155),s=t(12115),l=t(66634),n=t(62177),i=t(59434),d=t(85057);let c=n.Op,o=s.createContext({}),u=e=>{let{...r}=e;return(0,a.jsx)(o.Provider,{value:{name:r.name},children:(0,a.jsx)(n.xI,{...r})})},m=()=>{let e=s.useContext(o),r=s.useContext(p),{getFieldState:t,formState:a}=(0,n.xW)(),l=t(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=r;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...l}},p=s.createContext({}),f=s.forwardRef((e,r)=>{let{className:t,...l}=e,n=s.useId();return(0,a.jsx)(p.Provider,{value:{id:n},children:(0,a.jsx)("div",{ref:r,className:(0,i.cn)("space-y-2",t),...l})})});f.displayName="FormItem";let x=s.forwardRef((e,r)=>{let{className:t,...s}=e,{error:l,formItemId:n}=m();return(0,a.jsx)(d.J,{ref:r,className:(0,i.cn)(l&&"text-destructive",t),htmlFor:n,...s})});x.displayName="FormLabel";let h=s.forwardRef((e,r)=>{let{...t}=e,{error:s,formItemId:n,formDescriptionId:i,formMessageId:d}=m();return(0,a.jsx)(l.DX,{ref:r,id:n,"aria-describedby":s?"".concat(i," ").concat(d):"".concat(i),"aria-invalid":!!s,...t})});h.displayName="FormControl",s.forwardRef((e,r)=>{let{className:t,...s}=e,{formDescriptionId:l}=m();return(0,a.jsx)("p",{ref:r,id:l,className:(0,i.cn)("text-sm text-muted-foreground",t),...s})}).displayName="FormDescription";let j=s.forwardRef((e,r)=>{var t;let{className:s,children:l,...n}=e,{error:d,formMessageId:c}=m(),o=d?String(null!=(t=null==d?void 0:d.message)?t:""):l;return o?(0,a.jsx)("p",{ref:r,id:c,className:(0,i.cn)("text-sm font-medium text-destructive",s),...n,children:o}):null});j.displayName="FormMessage"},25318:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(40157).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},32275:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>k});var a=t(95155),s=t(12115),l=t(49254),n=t(30285),i=t(75943),d=t(3561),c=t(40157);let o=(0,c.A)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),u=(0,c.A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);var m=t(50172),p=t(87481),f=t(62177),x=t(90221),h=t(70927),j=t(54165),y=t(17759),v=t(59409),g=t(62523);let N=h.Ik({name:h.Yj().min(3,"O nome deve ter pelo menos 3 caracteres."),description:h.Yj().optional(),order:h.au.number().min(1,"A ordem deve ser no m\xednimo 1."),parentId:h.Yj().nullable().optional()});function b(e){let{isOpen:r,onOpenChange:t,onSuccess:i,category:d}=e,[c,o]=(0,s.useState)(!1),[u,h]=(0,s.useState)([]),{toast:b}=(0,p.dj)(),w=(0,f.mN)({resolver:(0,x.u)(N),defaultValues:{name:"",description:"",order:1,parentId:null}});(0,s.useEffect)(()=>{let e=async()=>{h((await (0,l.QU)()).filter(e=>e.id!==(null==d?void 0:d.id)))};r&&e()},[r,d]),(0,s.useEffect)(()=>{r&&(d?w.reset({name:d.name,description:d.description||"",order:d.order,parentId:d.parentId||null}):w.reset({name:"",description:"",order:1,parentId:null}))},[d,w,r]);let C=async e=>{o(!0);let r={...e,parentId:e.parentId||null};try{d?(await (0,l.st)(d.id,r),b({title:"Categoria atualizada com sucesso!",variant:"success"})):(await (0,l.zZ)(r),b({title:"Categoria criada com sucesso!",variant:"success"})),i()}catch(e){b({title:"Erro ao salvar categoria.",description:"Tente novamente mais tarde.",variant:"destructive"})}finally{o(!1)}};return(0,a.jsx)(j.lG,{open:r,onOpenChange:t,children:(0,a.jsxs)(j.Cf,{children:[(0,a.jsxs)(j.c7,{children:[(0,a.jsx)(j.L3,{children:d?"Editar Categoria":"Adicionar Nova Categoria"}),(0,a.jsx)(j.rr,{children:"Preencha os detalhes da categoria. A ordem define a posi\xe7\xe3o na home."})]}),(0,a.jsx)(y.lV,{...w,children:(0,a.jsxs)("form",{onSubmit:w.handleSubmit(C),className:"space-y-4",children:[(0,a.jsx)(y.zB,{control:w.control,name:"parentId",render:e=>{var r;let{field:t}=e;return(0,a.jsxs)(y.eI,{children:[(0,a.jsx)(y.lR,{children:"Categoria Pai (Opcional)"}),(0,a.jsxs)(v.l6,{onValueChange:t.onChange,value:null!=(r=t.value)?r:void 0,children:[(0,a.jsx)(y.MJ,{children:(0,a.jsx)(v.bq,{children:(0,a.jsx)(v.yv,{placeholder:"Nenhuma (Categoria Principal)"})})}),(0,a.jsx)(v.gC,{children:u.map(e=>(0,a.jsx)(v.eb,{value:e.id,children:e.name},e.id))})]}),(0,a.jsx)(y.C5,{})]})}}),(0,a.jsx)(y.zB,{control:w.control,name:"name",render:e=>{let{field:r}=e;return(0,a.jsxs)(y.eI,{children:[(0,a.jsx)(y.lR,{children:"Nome da Categoria"}),(0,a.jsx)(y.MJ,{children:(0,a.jsx)(g.p,{placeholder:"Ex: Brasileir\xe3o S\xe9rie A",...r})}),(0,a.jsx)(y.C5,{})]})}}),(0,a.jsx)(y.zB,{control:w.control,name:"description",render:e=>{let{field:r}=e;return(0,a.jsxs)(y.eI,{children:[(0,a.jsx)(y.lR,{children:"Descri\xe7\xe3o (Opcional)"}),(0,a.jsx)(y.MJ,{children:(0,a.jsx)(g.p,{placeholder:"Uma breve descri\xe7\xe3o para controle",...r})}),(0,a.jsx)(y.C5,{})]})}}),(0,a.jsx)(y.zB,{control:w.control,name:"order",render:e=>{let{field:r}=e;return(0,a.jsxs)(y.eI,{children:[(0,a.jsx)(y.lR,{children:"Ordem de Exibi\xe7\xe3o"}),(0,a.jsx)(y.MJ,{children:(0,a.jsx)(g.p,{type:"number",...r})}),(0,a.jsx)(y.C5,{})]})}}),(0,a.jsxs)(j.Es,{children:[(0,a.jsx)(n.$,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:c,children:"Cancelar"}),(0,a.jsxs)(n.$,{type:"submit",disabled:c,children:[c&&(0,a.jsx)(m.A,{className:"mr-2 h-4 w-4 animate-spin"}),d?"Salvar Altera\xe7\xf5es":"Criar Categoria"]})]})]})})]})})}var w=t(44838);let C=e=>{let{category:r,level:t,onEdit:s,onDelete:l,allCategories:c}=e,u=c.filter(e=>e.parentId===r.id);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-md hover:bg-muted/50",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{style:{marginLeft:"".concat(2*t,"rem")},className:"font-medium",children:r.name}),(0,a.jsxs)("span",{className:"ml-4 text-xs text-muted-foreground",children:["(Ordem: ",r.order,")"]})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(n.$,{variant:"ghost",size:"icon",onClick:()=>s(r),children:(0,a.jsx)(i.A,{className:"h-4 w-4"})}),(0,a.jsxs)(w.rI,{children:[(0,a.jsx)(w.ty,{asChild:!0,children:(0,a.jsx)(n.$,{variant:"ghost",size:"icon",children:(0,a.jsx)(d.A,{className:"h-4 w-4"})})}),(0,a.jsx)(w.SQ,{align:"end",children:(0,a.jsxs)(w._2,{onClick:()=>l(r.id),className:"text-red-500",children:[(0,a.jsx)(o,{className:"mr-2 h-4 w-4"}),"Excluir"]})})]})]})]}),u.length>0&&(0,a.jsx)("div",{className:"border-l border-dashed ml-4",children:u.map(e=>(0,a.jsx)(C,{category:e,level:t+1,onEdit:s,onDelete:l,allCategories:c},e.id))})]})};function k(){let[e,r]=(0,s.useState)([]),[t,i]=(0,s.useState)(!0),[d,c]=(0,s.useState)(!1),[o,f]=(0,s.useState)(null),{toast:x}=(0,p.dj)(),h=async()=>{i(!0);try{let e=await (0,l.QU)();r(e)}catch(e){x({title:"Erro ao buscar categorias.",variant:"destructive"})}finally{i(!1)}};(0,s.useEffect)(()=>{h()},[]);let j=(0,s.useMemo)(()=>e.filter(e=>!e.parentId).sort((e,r)=>e.order-r.order),[e]),y=e=>{f(e),c(!0)},v=async r=>{if(e.filter(e=>e.parentId===r).length>0)return void x({title:"N\xe3o \xe9 poss\xedvel excluir",description:"Esta categoria possui subcategorias. Exclua-as primeiro.",variant:"destructive"});try{await (0,l.K7)(r),x({title:"Categoria exclu\xedda com sucesso!",variant:"success"}),h()}catch(e){x({title:"Erro ao excluir categoria.",variant:"destructive"})}};return(0,a.jsxs)("div",{className:"container mx-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Gerenciamento de Categorias"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Crie e organize a hierarquia do seu cat\xe1logo de bol\xf5es."})]}),(0,a.jsxs)(n.$,{onClick:()=>{f(null),c(!0)},children:[(0,a.jsx)(u,{className:"mr-2 h-4 w-4"}),"Adicionar Nova Categoria"]})]}),(0,a.jsx)("div",{className:"bg-card p-4 rounded-lg border",children:t?(0,a.jsx)("div",{className:"text-center h-24 flex items-center justify-center",children:(0,a.jsx)(m.A,{className:"h-6 w-6 animate-spin mx-auto"})}):j.length>0?j.map(r=>(0,a.jsx)(C,{category:r,level:0,onEdit:y,onDelete:v,allCategories:e},r.id)):(0,a.jsx)("div",{className:"text-center h-24 flex items-center justify-center",children:(0,a.jsx)("p",{children:"Nenhuma categoria encontrada. Comece adicionando uma!"})})}),(0,a.jsx)(b,{isOpen:d,onOpenChange:c,onSuccess:()=>{h(),c(!1)},category:o})]})}},39699:(e,r,t)=>{Promise.resolve().then(t.bind(t,32275))},49254:(e,r,t)=>{"use strict";t.d(r,{K7:()=>c,QU:()=>i,st:()=>d,zZ:()=>n});var a=t(35317),s=t(56104);let l=(0,a.rJ)(s.db,"categories"),n=async e=>(await (0,a.gS)(l,{...e,createdAt:(0,a.O5)()})).id,i=async()=>{let e=(0,a.P)(l,(0,a.My)("order","asc"));return(await (0,a.GG)(e)).docs.map(e=>({id:e.id,...e.data()}))},d=async(e,r)=>{let t=(0,a.H9)(s.db,"categories",e);await (0,a.mZ)(t,r)},c=async e=>{let r=(0,a.H9)(s.db,"categories",e);await (0,a.kd)(r)}},59409:(e,r,t)=>{"use strict";t.d(r,{bq:()=>m,eb:()=>h,gC:()=>x,l6:()=>o,yv:()=>u});var a=t(95155),s=t(12115),l=t(11031),n=t(79556),i=t(77381),d=t(10518),c=t(59434);let o=l.bL;l.YJ;let u=l.WT,m=s.forwardRef((e,r)=>{let{className:t,children:s,...i}=e;return(0,a.jsxs)(l.l9,{ref:r,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-muted/20 px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...i,children:[s,(0,a.jsx)(l.In,{asChild:!0,children:(0,a.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=l.l9.displayName;let p=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(l.PP,{ref:r,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(i.A,{className:"h-4 w-4"})})});p.displayName=l.PP.displayName;let f=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(l.wn,{ref:r,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})});f.displayName=l.wn.displayName;let x=s.forwardRef((e,r)=>{let{className:t,children:s,position:n="popper",...i}=e;return(0,a.jsx)(l.ZL,{children:(0,a.jsxs)(l.UC,{ref:r,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...i,children:[(0,a.jsx)(p,{}),(0,a.jsx)(l.LM,{className:(0,c.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,a.jsx)(f,{})]})})});x.displayName=l.UC.displayName,s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(l.JU,{ref:r,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...s})}).displayName=l.JU.displayName;let h=s.forwardRef((e,r)=>{let{className:t,children:s,...n}=e;return(0,a.jsxs)(l.q7,{ref:r,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(l.VF,{children:(0,a.jsx)(d.A,{className:"h-4 w-4"})})}),(0,a.jsx)(l.p4,{children:s})]})});h.displayName=l.q7.displayName,s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(l.wv,{ref:r,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",t),...s})}).displayName=l.wv.displayName},66634:(e,r,t)=>{"use strict";t.d(r,{DX:()=>n});var a=t(12115);function s(e,r){if("function"==typeof e)return e(r);null!=e&&(e.current=r)}var l=t(95155),n=function(e){let r=function(e){let r=a.forwardRef((e,r)=>{let{children:t,...l}=e;if(a.isValidElement(t)){var n;let e,i,d=(n=t,(i=(e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.ref:(i=(e=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.props.ref:n.props.ref||n.ref),c=function(e,r){let t={...r};for(let a in r){let s=e[a],l=r[a];/^on[A-Z]/.test(a)?s&&l?t[a]=(...e)=>{let r=l(...e);return s(...e),r}:s&&(t[a]=s):"style"===a?t[a]={...s,...l}:"className"===a&&(t[a]=[s,l].filter(Boolean).join(" "))}return{...e,...t}}(l,t.props);return t.type!==a.Fragment&&(c.ref=r?function(...e){return r=>{let t=!1,a=e.map(e=>{let a=s(e,r);return t||"function"!=typeof a||(t=!0),a});if(t)return()=>{for(let r=0;r<a.length;r++){let t=a[r];"function"==typeof t?t():s(e[r],null)}}}}(r,d):d),a.cloneElement(t,c)}return a.Children.count(t)>1?a.Children.only(null):null});return r.displayName=`${e}.SlotClone`,r}(e),t=a.forwardRef((e,t)=>{let{children:s,...n}=e,i=a.Children.toArray(s),c=i.find(d);if(c){let e=c.props.children,s=i.map(r=>r!==c?r:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,l.jsx)(r,{...n,ref:t,children:a.isValidElement(e)?a.cloneElement(e,void 0,s):null})}return(0,l.jsx)(r,{...n,ref:t,children:s})});return t.displayName=`${e}.Slot`,t}("Slot"),i=Symbol("radix.slottable");function d(e){return a.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===i}},74466:(e,r,t)=>{"use strict";t.d(r,{F:()=>n});var a=t(52596);let s=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,l=a.$,n=(e,r)=>t=>{var a;if((null==r?void 0:r.variants)==null)return l(e,null==t?void 0:t.class,null==t?void 0:t.className);let{variants:n,defaultVariants:i}=r,d=Object.keys(n).map(e=>{let r=null==t?void 0:t[e],a=null==i?void 0:i[e];if(null===r)return null;let l=s(r)||s(a);return n[e][l]}),c=t&&Object.entries(t).reduce((e,r)=>{let[t,a]=r;return void 0===a||(e[t]=a),e},{});return l(e,d,null==r||null==(a=r.compoundVariants)?void 0:a.reduce((e,r)=>{let{class:t,className:a,...s}=r;return Object.entries(s).every(e=>{let[r,t]=e;return Array.isArray(t)?t.includes({...i,...c}[r]):({...i,...c})[r]===t})?[...e,t,a]:e},[]),null==t?void 0:t.class,null==t?void 0:t.className)}},75943:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(40157).A)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])}},e=>{var r=r=>e(e.s=r);e.O(0,[2992,7138,4277,7106,7239,9397,9205,5075,3983,3421,6515,8441,1684,7358],()=>r(39699)),_N_E=e.O()}]);